<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
    <title>환율계산</title>
</head>
<body>
<h1>환율계산</h1>
<div>
    <p>송금국가: 미국(USD)</p>
</div>
<div>
    수취국가:
    <select name="recipientCountry" id="recipientCountry">
        <option selected value="KRW">한국(KRW)</option>
        <option value="JPY">일본(JPY)</option>
        <option value="PHP">필리핀(PHP)</option>
    </select>
</div>
<div>
    환율: <span id="exchangeRate"></span>
</div>
<div>
    송금액: <span><input type="number" id="remittanceAmount"></span>USD
</div>
<div>
    <button type="button">환율 계산</button>
</div>
</body>
<script>
$(window).on('load', getExchangeRate());

function getExchangeRate() {
    var recipientCountry = $('#recipientCountry').val();

    $.ajax({
        url: "api/exchange-rate?remittanceCountry=USD&recipientCountry=" + recipientCountry,
        method: 'GET',
        success: function (exchangeRate) {
            $('#exchangeRate').text(exchangeRate + " " + recipientCountry + "/USD");
        },
        error : function(err) {
            if(err.status === 400) {
                alert("error 400 : Bad Request");
            } else if(err.status === 500) {
                alert("error 500 : " + err.responseText);
            } else if(err.status === 404) {
                alert("error 404 : Not Found");
            }
        }
    });
}
</script>
</html>